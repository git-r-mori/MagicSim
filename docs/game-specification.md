# MagicSim 2.5D 箱庭パズル ゲーム仕様書

## 0. プロジェクトの位置づけ

- **趣味** 兼 **個人学習** 兼 **ポートフォリオ** 用作品
- リリースは **AWS** を使用する予定（既存 SST 構成を流用）

---

## 0.1 実装方針（重要）

- **複雑な処理はできるだけ避ける**。シンプルな実装を優先する
- 技術的難易度やバグ状況を踏まえ、**仕様は適宜変更してよい**
- 実現が難しい場合は、簡略化や代替案を採用する

---

## 1. 概要

箱庭ステージで、魔法の力を使ってパズルを解き進めるゲーム。見下ろし視点・グリッドベース。

---

## 2. 視点・カメラ

| 項目   | 内容                     |
| ------ | ------------------------ |
| 視点   | 見下ろし（トップダウン） |
| カメラ | OrthographicCamera       |
| 操作   | 軽いズーム・パンが可能   |

---

## 3. ステージ

| 項目       | 内容                                               |
| ---------- | -------------------------------------------------- |
| 表現       | グリッド（タイル）ベース                           |
| サイズ     | プロトタイプは 8×8 程度                            |
| タイル種類 | 床、壁、氷、ゴールなど                             |
| ステージ数 | プロトタイプで 3 ステージ                          |
| 見た目     | 目標はミニチュア風。初期は簡素なブロック表現でよい |

---

## 4. プレイヤー

| 項目   | 内容                               |
| ------ | ---------------------------------- |
| 存在   | あり（グリッド上を移動）           |
| 移動   | タイル単位（上下左右）             |
| 操作   | **WASD** で移動                    |
| ゴール | ゴールタイルに到達でステージクリア |

---

## 5. 魔法システム

| 項目         | 内容                            |
| ------------ | ------------------------------- |
| 発動方法     | **クリックでタイル選択 → 発動** |
| プロトタイプ | 炎のみ（氷を溶かして進路確保）  |
| 効果         | 氷タイル → 溶けて床に変化       |
| 制限         | MP や使用回数などは将来の拡張   |

---

## 6. パズル

| 項目       | 内容                                     |
| ---------- | ---------------------------------------- |
| 基本ループ | 氷で塞がれた道を炎で溶かし、ゴールへ到達 |
| ステージ1  | シンプルな 1 ブロック氷除去              |
| ステージ2  | 複数ブロック、順序の工夫                 |
| ステージ3  | より複雑な配置                           |

---

## 7. 技術方針

| 項目           | 方針                                         |
| -------------- | -------------------------------------------- |
| レンダリング   | R3F + OrthographicCamera                     |
| ステージ表現   | 2 次元グリッド配列                           |
| 物理           | タイルベースのため Rapier は不要（削除検討） |
| ロジック       | pkg/core に魔法・パズル・ステージ定義        |
| 見た目（初期） | 簡素なキューブ・平面で可読性優先             |

---

## 8. 将来的な拡張候補

- 水魔法（炎を消す、草を成長させる等）
- ミニチュア風のアート（テクスチャ、装飾）
- 追加ステージ・難易度
- MP・魔法使用回数制限

---

## 9. 未確定事項

（現在なし）

---

## 10. 実装優先度（プロトタイプ）

1. グリッドステージ表示（見下ろし）
2. カメラ：ズーム・パン操作
3. プレイヤー配置・移動（WASD）
4. 炎魔法：タイルクリックで発動
5. 氷タイル→溶けて床へ変化
6. ゴール到達でクリア判定
7. 3 ステージ分のマップデータ
8. ステージ選択・クリア後の遷移
